{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iconClose from \"../img/icon-close.svg\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst Refs = {\n  datetimePicker: document.querySelector('.timer-input'),\n  btn: document.querySelector('[data-start]'),\n  days: document.querySelector('[data-days]'),\n  hours: document.querySelector('[data-hours]'),\n  minutes: document.querySelector('[data-minutes]'),\n  seconds: document.querySelector('[data-seconds]'),\n}\nconst {datetimePicker, btn, days, hours, minutes, seconds } = Refs;\n\nlet userSelectedDate;\n\nbtn.disabled = true;\nbtn.classList.add('disabled');\n\nconst options = {\n  locale: {\n    firstDayOfWeek: 1,\n     weekdays: {\n      shorthand: ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa'],\n      longhand: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],\n    },\n  },\n  dateFormat: 'Y-m-d H:i',\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n      if (selectedDates[0].getTime() <= new Date()) {\n        iziToast.error({\n          id: 'errorMsg',\n          iconUrl: iconClose,\n          iconColor: 'white',\n          message: 'Please choose a date in the future',\n          timeout: 3000,\n          position: 'topRight',\n          backgroundColor: '#ef4040',\n          progressBarColor: '#b51b1b',\n          })\n        btn.disabled = true;\n        \n      } else {\n          btn.disabled = false;\n          userSelectedDate = selectedDates[0].getTime();   \n      }\n  },\n};\nflatpickr(datetimePicker, options);\n\nbtn.addEventListener('click', onBtnClick);\n\n\nfunction onBtnClick() {\n  const intervalId = setInterval(() => {\n    const deltaTime = userSelectedDate - new Date();\n    const time = convertMs(deltaTime);\n\n    if (deltaTime <= 0) {\n      clearInterval(intervalId);\n      btn.disabled = false;\n      datetimePicker.disabled = false;\n      return;\n    }\n    btn.disabled = true;\n    datetimePicker.disabled = true;\n\n    days.textContent = addLeadingZero(time.days);\n    hours.textContent = addLeadingZero(time.hours);\n    minutes.textContent = addLeadingZero(time.minutes);\n    seconds.textContent = addLeadingZero(time.seconds);\n    \n  }, 1000);\n}\n\nfunction addLeadingZero(value) {\n  return value.toString().padStart(2, '0');\n}\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}"],"names":["Refs","datetimePicker","btn","days","hours","minutes","seconds","userSelectedDate","options","selectedDates","iziToast","iconClose","flatpickr","onBtnClick","intervalId","deltaTime","time","convertMs","addLeadingZero","value","ms"],"mappings":"2GAOA,MAAMA,EAAO,CACX,eAAgB,SAAS,cAAc,cAAc,EACrD,IAAK,SAAS,cAAc,cAAc,EAC1C,KAAM,SAAS,cAAc,aAAa,EAC1C,MAAO,SAAS,cAAc,cAAc,EAC5C,QAAS,SAAS,cAAc,gBAAgB,EAChD,QAAS,SAAS,cAAc,gBAAgB,CAClD,EACM,CAAC,eAAAC,EAAgB,IAAAC,EAAK,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAS,EAAGN,EAE9D,IAAIO,EAEJL,EAAI,SAAW,GACfA,EAAI,UAAU,IAAI,UAAU,EAE5B,MAAMM,EAAU,CACd,OAAQ,CACN,eAAgB,EACf,SAAU,CACT,UAAW,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,IAAI,EACpD,SAAU,CAAC,SAAU,SAAU,UAAW,YAAa,WAAY,SAAU,UAAU,CACxF,CACF,EACD,WAAY,YACZ,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACfA,EAAc,GAAG,QAAO,GAAM,IAAI,MACpCC,EAAS,MAAM,CACb,GAAI,WACJ,QAASC,EACT,UAAW,QACX,QAAS,qCACT,QAAS,IACT,SAAU,WACV,gBAAiB,UACjB,iBAAkB,SAC5B,CAAW,EACHT,EAAI,SAAW,KAGbA,EAAI,SAAW,GACfK,EAAmBE,EAAc,GAAG,QAAO,EAElD,CACH,EACAG,EAAUX,EAAgBO,CAAO,EAEjCN,EAAI,iBAAiB,QAASW,CAAU,EAGxC,SAASA,GAAa,CACpB,MAAMC,EAAa,YAAY,IAAM,CACnC,MAAMC,EAAYR,EAAmB,IAAI,KACnCS,EAAOC,EAAUF,CAAS,EAEhC,GAAIA,GAAa,EAAG,CAClB,cAAcD,CAAU,EACxBZ,EAAI,SAAW,GACfD,EAAe,SAAW,GAC1B,MACD,CACDC,EAAI,SAAW,GACfD,EAAe,SAAW,GAE1BE,EAAK,YAAce,EAAeF,EAAK,IAAI,EAC3CZ,EAAM,YAAcc,EAAeF,EAAK,KAAK,EAC7CX,EAAQ,YAAca,EAAeF,EAAK,OAAO,EACjDV,EAAQ,YAAcY,EAAeF,EAAK,OAAO,CAElD,EAAE,GAAI,CACT,CAEA,SAASE,EAAeC,EAAO,CAC7B,OAAOA,EAAM,SAAU,EAAC,SAAS,EAAG,GAAG,CACzC,CAEA,SAASF,EAAUG,EAAI,CAQrB,MAAMjB,EAAO,KAAK,MAAMiB,EAAK,KAAG,EAE1BhB,EAAQ,KAAK,MAAOgB,EAAK,MAAO,IAAI,EAEpCf,EAAU,KAAK,MAAQe,EAAK,MAAO,KAAQ,GAAM,EAEjDd,EAAU,KAAK,MAASc,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAjB,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC"}